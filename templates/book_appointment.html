<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Book Appointment - Smart Appointment System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='bookappointment.css') }}">
</head>
<body>
    <h2>Book Appointment</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('book_appointment') }}">
        <label for="date">Appointment Date</label>
        <input type="date" id="date" name="date" required min="{{ (now or '') }}"/>

        <label for="start_time">Start Time (Hour, 24h format)</label>
        <input type="number" id="start_time" name="start_time" min="0" max="23" required />

        <label for="end_time">End Time (Hour, 24h format)</label>
        <input type="number" id="end_time" name="end_time" min="0" max="23" required />

        <label for="employee_username">Choose Employee</label>
        <select id="employee_username" name="employee_username" required>
            <option value="" disabled selected>Select an employee</option>
            {% for emp in employees %}
                <option value="{{ emp.username }}">{{ emp.name }} ({{ emp.designation or 'Employee' }})</option>
            {% endfor %}
        </select>

        <button type="submit">Book Appointment</button>
    </form>

    <a href="{{ url_for('dashboard') }}" class="btn-back">&larr; Back to Dashboard</a>


</body>
</html>
